<div class=row><div class=col-lg-11><rd-widget><rd-widget-header icon=fa-code title="Sub Products"><input type=text class=form-control placeholder="Search component" ng-model=subProduct.name></rd-widget-header><rd-widget-body classes="lauto no-padding"><div class=table-responsive><table class=table><thead><tr><th><a ng-click="sortType = 'name'; sortReverse = !sortReverse;">Name</a></th><th><a ng-click="sortType = 'cmt'; sortReverse = !sortReverse;">Comment</a></th><th><a ng-click="sortType = 'create_at'; sortReverse = !sortReverse;">Create date</a></th><th>Actions</th></tr></thead><tbody ng-repeat="sub in release.subproducts | orderBy: sortType: sortReverse | filter:subProduct.name"><tr style=cursor:pointer ng-click="sub.is_collapsed = !sub.is_collapsed" ng-init="sub.is_collapsed = ($index !== 0)"><td ng-show="sub.components.length == 0"><span style="color: #bbb">{{sub.name}}</span></td><td ng-show="sub.components.length > 0"><a class=fa ng-class="{'fa-angle-right': sub.is_collapsed == true, 'fa-angle-down': sub.is_collapsed == false}"></a> {{sub.name}}</td><td>{{sub.cmt}}</td><td>{{ sub.create_at | date: 'yyyy-MM-dd HH:mm'}}</td><td><a class="fa fa-plus" title="add component" ng-click="addComponent($event, sub.id)"></a>&nbsp;&nbsp; <a class="fa fa-times" title=Remove ng-click=delete($event,sub)></a>&nbsp;&nbsp; <a class="fa fa-paper-plane" title="Generate Email Text" ng-click="$state.go('email.subproducts', {subproductId: sub.id})"></a></td></tr><tr ng-if="sub.components.length > 0" ng-show="sub.components.length > 0 && sub.is_collapsed == false"><td colspan=5><table class=table style="width: 95%; margin-left: 1%"><tr ng-repeat="c in sub.components | orderBy: sortType: sortReverse"><td><a ui-sref="components.show({componentId: c.id})">{{c.name}}</a></td><td>{{c.cmt}}</td><td><span>{{c.create_at | date: 'yyyy-MM-dd HH:mm'}}</span></td><td style="width: 20%"><uib-progress><uib-bar ng-repeat="bar in c.stacked track by $index" value=bar.value type={{bar.type}}><span ng-hide="bar.value < 5">{{bar.value|number:1}}%</span></uib-bar></uib-progress></td><td><a ui-sref="components.show({componentId: c.id})" class="fa fa-play" title=Run></a>&nbsp; <a class="fa fa-times" title=Remove ng-click=deleteComponent($event,c)></a>&nbsp; <a ng-href=/api/export/components/{{c.id}}/{{c.name}}-script.xls class="fa fa-file-excel-o" title="Export as Excel2003" target=_blank></a>&nbsp; <a ng-href=/api/export/components/{{c.id}}.json class="fa fa-file-code-o" title="View JSON format" target=_blank></a></td></tr></table></td></tr></tbody></table></div></rd-widget-body></rd-widget></div><script type=text/ng-template id=addcomponent.tmpl.html><md-dialog aria-label="Add Component" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Add Component</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <form class="form-horizontal"> <div class="form-group"> <label class="col-sm-3 control-label">Name:</label> <div class="col-sm-10"> <input type="text" ng-model="cmpt.name" placeholder="please input name"> </div> </div> <br> <div class="form-group"> <label class="col-sm-3 control-label">Comment:</label> <div class="col-sm-10"> <input type="text" ng-model="cmpt.cmt" placeholder="please input cmt"> </div> </div> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="cancel()"> Not Save </md-button> <md-button ng-click="save()" style="margin-right:20px;"> Save </md-button> </md-dialog-actions> </form> </md-dialog></script></div>