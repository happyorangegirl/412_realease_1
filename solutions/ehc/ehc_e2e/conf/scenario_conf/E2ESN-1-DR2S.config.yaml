# ################################ Configuration section #############################################################
# Automation user only needs to update the parameters in this section
# [Mandatory] parameters : you must update with the right ones in your environment.
# [Optional] parameters : you can suggested to update with your own, but not mandatory.

mandatory:
    Protected vCenter:
        1-vCenter Protected Info:
            1-protected_vCenter_fqdn:                 &vcs01_fqdn                 'vcs01.vlab.local'
            2-protected_vCenter_datacenter:           &vcs01_dc                   'Cork'
        2-Srm Plugin Protected Site:
            1-protected_srm_username_with_privileges:         &vcs01_srm_user             'administrator@vsphere.local'
            2-protected_srm_password:         &vcs01_srm_pwd              'Password123!'
        3-Protected Srm:
            3-protected_srm_soap_host_fqdn:        &vcs01_srm_fqdn        'srm01.vlab.local'
            4-protected_srm_soap_user:        &vcs01_srm_soap_user        'app_vco_vcenter@vlab.local'
            5-protected_srm_soap_pwd:         &vcs01_srm_soap_pwd         'Password123!'
        4-Srm Sql Protected Site:
            1-protected_srm_sql_db_host:         &vcs01_srm_sql_fqdn         'sql01.vlab.local'
            2-protected_srm_sql_db_port:         &vcs01_srm_sql_port         1433
            3-protected_srm_sql_auth_type:    &vcs01_srm_sql_auth         'Domain'
            4-protected_srm_sql_username:     &vcs01_srm_sql_user         'ehc_sysadmin'
            5-protected_srm_sql_password:     &vcs01_srm_sql_pwd          'Password123!'
            6-protected_srm_sql_user_domain:  &vcs01_srm_domain           'vlab.local'
            7-protected_srm_sql_db_name:      &vcs01_srm_sql_db           'srm_a'
    Recovery vCenter:
        1-vCenter Recovery Info:
            1-recovery_vCenter_fqdn:                 &vcs03_fqdn                 'vcs03.vlab.local'
            2-recovery_vCenter_datacenter:           &vcs03_dc                   'Paris'
        2-Srm Plugin Recovery Site:
            1-recovery_srm_username_with_privileges:         &vcs03_srm_user             'administrator@vsphere.local'
            2-recovery_srm_password:         &vcs03_srm_pwd              'Password123!'
        3-Recovery Srm:
            1-recovery_srm_soap_host_fqdn:        &vcs03_srm_fqdn             'srm02.vlab.local'
            2-recovery_srm_soap_user:        &vcs03_srm_soap_user        'app_vco_vcenter@vlab.local'
            3-recovery_srm_soap_pwd:         &vcs03_srm_soap_pwd         'Password123!'
        4-Srm Sql Recovery Site:
            1-recovery_srm_sql_db_host:         &vcs03_srm_sql_fqdn         'sql02.vlab.local'
            2-recovery_srm_sql_db_port:         &vcs03_srm_sql_port         1433
            3-recovery_srm_sql_auth_type:    &vcs03_srm_sql_auth         'Domain'
            4-recovery_srm_sql_username:     &vcs03_srm_sql_user         'ehc_sysadmin'
            5-recovery_srm_sql_password:     &vcs03_srm_sql_pwd          'Password123!'
            6-recovery_srm_sql_user_domain:  &vcs03_srm_domain           'vlab.local'
            7-recovery_srm_sql_db_name:      &vcs03_srm_sql_db           'srm_b'
    HWI:
        1-protected_vipr_varray:               &vipr_varray_protected               'CRK-HWI-1-vArray1'
        2-recovery_vipr_varray:                &vipr_varray_recovery                'PAR-HWI-1-vArray1'
    Cluster:
        1-protected_cluster_name:              &cluster_name_protected              'CRK-PAR-DR-C1'
        2-recovery_cluster_name:               &cluster_name_recovery               'PAR-CRK-DR-C1'
    Avamar grid:
        1-protected_avamar_grid_fqdn:         &avamar_grid_fqdn_protected          'cork-ave02.vlab.local'
        2-recovery_avamar_grid_fqdn:          &avamar_grid_fqdn_recovery           'paris-ave02.vlab.local'
        3-admin_user_name:                    &admin_user_name                    'root'
        4-admin_password:                     &admin_password                     'Password123!'
        5-soap_user_name:                     &soap_user_name                     'root'
        6-soap_password:                      &soap_password                      'Emsee123_'
    provision_multiple_cloud_storage:
        1-storage_tier(Use comma to split the storage tiers):             &vipr_storage_tier    "CRK-DR-0.25x, DNU_CRK-DR-VNX778"
        2-storage_type:                       &storage_type               'VMFS DR-Enabled'
        3-number_of_smaller_size_storages(Non-negative interger): &vPool_DS_Small  1
        4-number_of_larger_size_storages(Non-negative interger):  &vPool_DS_Large  0
    Pre-Reservation:
        reservation_names:                    &reservation_names                'reservation_names'
    Pre-Reservation Policy:
        reservation_policy_name:                &reservation_policy_name              'DR2S-DP-RP'
    Backup Service Level:
        additional_email:                     &additional_email                   'louis.yin@emc.com'
    Virtual machine blueprint:
        blueprint_name:                       &blueprint_name                     'Buleprint-dp'
        vSphere_Machine_ID:                   &vSphere_Machine_ID                 'vSphere_Machine_1'
    Deploy VM Parallel:
        cpu_max:                        &cpu_max              2
        ram_max:                              &ram_max                    8192
    Protected Avamar Proxy:
        1-protected_dns_updated:              &protected_dns_updated                'Yes'
        2-protected_datastore:                  &protected_avamar_proxy_datastore     'DK_AVP-Templates'
        3-protected_proxy_network:              &protected_proxy_network              'DPG_HPOD_L2X_1960 (DVS_Cloud_VCS01_Dakar)'
        4-protected_proxy_vm_name:              &protected_proxy_vm_name              'Giza-ave01-p2.vlab.local'
        5-protected_avamar_path:                &protected_avamar_path                '/clients/Giza-ave01.vlab.local'
        6-protected_proxy_ip:                   &protected_proxy_ip                   '192.168.0.92'
        7-protected_proxy_netmask:              &protected_proxy_netmask              '255.255.248.0'
        8-protected_proxy_gateway:              &protected_proxy_gateway              '192.168.1.250'
        9-protected_dns_server_ip:              &protected_dns_server_ip              '192.168.1.10'
        11-protected_proxy_username:             &protected_proxy_username             'root'
        12-protected_proxy_password:             &protected_proxy_password             'avam@r'
        13-protected_avamar_domain:              &protected_avamar_domain              '/clients'
        14-protected_ova:                        &protected_avamar_proxy_ova           '/DPNInstalls/downloads/VMWARE_PROXY_SP3/AvamarCombinedProxy-linux-sles11_64-7.4.101-58.ova'
        15-protected_deployment_server:          &protected_deployment_server          'Dakar-ave01-p0.vlab.local'
        16-protected_deployment_server_username: &protected_deployment_server_username 'root'
        17-protected_deployment_server_password: &protected_deployment_server_password 'avam@r'
        18-protected_disable_verification:       &protected_disable_verification       'No'
    Recovery Avamar Proxy:
        1-recovery_dns_updated:              &recovery_dns_updated                'Yes'
        2-recovery_datastore:                  &recovery_avamar_proxy_datastore     'DK_AVP-Templates'
        3-recovery_proxy_network:              &recovery_proxy_network              'DPG_HPOD_L2X_1960 (DVS_Cloud_VCS01_Dakar)'
        4-recovery_proxy_vm_name:              &recovery_proxy_vm_name              'Giza-ave01-p2.vlab.local'
        5-recovery_avamar_path:                &recovery_avamar_path                '/clients/Giza-ave01.vlab.local'
        6-recovery_proxy_ip:                   &recovery_proxy_ip                   '192.168.0.92'
        7-recovery_proxy_netmask:              &recovery_proxy_netmask              '255.255.248.0'
        8-recovery_proxy_gateway:              &recovery_proxy_gateway              '192.168.1.250'
        9-recovery_dns_server_ip:              &recovery_dns_server_ip              '192.168.1.10'
        11-recovery_proxy_username:             &recovery_proxy_username             'root'
        12-recovery_proxy_password:             &recovery_proxy_password             'avam@r'
        13-recovery_avamar_domain:              &recovery_avamar_domain              '/clients'
        14-recovery_ova:                        &recovery_avamar_proxy_ova           '/DPNInstalls/downloads/VMWARE_PROXY_SP3/AvamarCombinedProxy-linux-sles11_64-7.4.101-58.ova'
        15-recovery_deployment_server:          &recovery_deployment_server          'Dakar-ave01-p0.vlab.local'
        16-recovery_deployment_server_username: &recovery_deployment_server_username 'root'
        17-recovery_deployment_server_password: &recovery_deployment_server_password 'avam@r'
        18-recovery_disable_verification:       &recovery_disable_verification       'No'
################################# Configuration section #############################################################
optional:
    Site:
        site_name_protected:                 &site_name_protected                 'DR2S-DP-Site-Pro'
        site_name_recovery:                  &site_name_recovery                  'DR2S-DP-Site-Rec'
    vCenter:
        vcenter_name_protected:              &vcenter_name_protected              'DR2S-DP-vcs01'
        vcenter_name_recovery:               &vcenter_name_recovery               'DR2S-DP-vcs03'
    HWI:
        hwi_name_protected:                 &hwi_name_protected                   'DR2S-DP-HWI-1-Pro'
        hwi_name_recovery:                  &hwi_name_recovery                    'DR2S-DP-HWI-1-Rec'
    Avamar Grid:
        avamar_name_protected:               &avamar_name_protected               'DR2S-DP-ave01-Pro'
        avamar_name_recovery:                &avamar_name_recovery                'DR2S-DP-ave01-Rec'
    backup_service_name_prefix:             &backup_name_prefix                    'E2E-1-DR2S-DP'
Intermediate_key:
    # no need to write------------
    added_sites: &added_sites []
    added_vcenter: &added_vcenter []
    # added vcentr relationship
    protected_vcenter: &protected_vcenter
    recovery_vcenter: &recovery_vcenter
    added_hwi: &added_hwi []
    existed_clusters: &existed_clusters []
    added_avamar_grid: &added_avamar_grid []
    # added asr
    asr_name: &asr_name
    backup_environment_type: &backup_environment_type
    sites: &sites []
    added_avamar_replication_relationship: &added_avamar_replication_relationship []
    # paramters to added_backup_service_level
    backup_to_operate_vm: &backup_to_operate_vm
    backup_to_set_backup_service: &backup_to_set_backup_service
    # added cloud storage
    datastorage_name: &datastorage_name []
    storage_hwi: &storage_hwi
    storage_cluster: &storage_cluster
    srp: &srp
    added_reservation_policy: &added_reservation_policy []
    assigned_buleprint: &assigned_buleprint []
    assigned_reservation: &assigned_reservation []
    deployed_vms: &deployed_vms []

onboard_cluster_type: DR2S

shared:
    current_browser:
        type:
        instance:
        launched: False
        current_user:
        is_login: False
    backup_service_levels:
        for_deletion: []
        for_deploy_vm:
        for_set_backup_service_level:

blueprints:
    - *blueprint_name

blueprint_machine_pairs:
    {*blueprint_name: *vSphere_Machine_ID}

add_sites:
    - *site_name_protected
    - *site_name_recovery

add_vcenter:
    - select_operation: Add vCenter
      name_for_vcenter_endpoint: *vcenter_name_protected
      select_vc_fqdn_to_add: *vcs01_fqdn
      new_vcenter_associated_sites:
        - *site_name_protected
      select_datacenter_to_add: *vcs01_dc

    - select_operation: Add vCenter
      name_for_vcenter_endpoint: *vcenter_name_recovery
      select_vc_fqdn_to_add: *vcs03_fqdn
      new_vcenter_associated_sites:
        - *site_name_recovery
      select_datacenter_to_add: *vcs03_dc

add_hwi:
    - hwi_name: *hwi_name_protected
      performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
      vcenter_name_active: *vcenter_name_protected
      site_name_active: *site_name_protected
      storage_type: 'BLOCK'
      vipr_active: ViPR
      vipr_active_check:
        - *vipr_varray_protected

    - hwi_name: *hwi_name_recovery
      performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
      vcenter_name_active: *vcenter_name_recovery
      site_name_active: *site_name_recovery
      storage_type: 'BLOCK'
      vipr_active: ViPR
      vipr_active_check:
        - *vipr_varray_recovery

deploy_vm_parallel:
    with_dp: True
    description: ''
    number_of_vm: 1
    cpu_max: *cpu_max
    ram_max: *ram_max
    srm_power_on_priority: 3
    reason_for_request: test DR2S scenario WF

# extend RP4VM vcenter relationship
extend_vcenter_relationship:
    description: extend_vcenter_relationship
    reasons: reasons01
    please_select_the_operation: Extend RP4VM vCenter Relationship with SRMDR
    protected_vcenter_name: *vcenter_name_protected
    recovery_vcenter_name: *vcenter_name_recovery
    srm_plugin_protected_site:
        select_protected_srm_site: *vcs01_fqdn
        protected_srm_username_with_privileges_to_srm: *vcs01_srm_user
        srm_protected_password: *vcs01_srm_pwd
    srm_plugin_recovery_site:
        select_recovery_srm_site: *vcs03_fqdn
        recovery_srm_username_with_privileges_to_srm: *vcs03_srm_user
        srm_recovery_password: *vcs03_srm_pwd
    srm_sql_protected_site:
        srm_protected_site_sql_database_host: *vcs01_srm_sql_fqdn
        protected_site_sql_database_port: *vcs01_srm_sql_port
        protected_select_authentication_type: *vcs01_srm_sql_auth
        protected_site_sql_username: *vcs01_srm_sql_user
        protected_site_sql_password: *vcs01_srm_sql_pwd
        protected_site_sql_user_domain: *vcs01_srm_domain
        protected_site_sql_database_name: *vcs01_srm_sql_db
    srm_sql_recovery_site:
        srm_recovery_site_sql_database_host: *vcs03_srm_sql_fqdn
        recovery_site_sql_database_port: *vcs03_srm_sql_port
        recovery_select_authentication_type: *vcs03_srm_sql_auth
        recovery_site_sql_username: *vcs03_srm_sql_user
        recovery_site_sql_password: *vcs03_srm_sql_pwd
        recovery_site_sql_user_domain: *vcs03_srm_domain
        recovery_site_sql_database_name: *vcs03_srm_sql_db
    protected_srm:
        protected_srm_soap_host_fqdn: *vcs01_srm_fqdn
        protected_srm_soap_username: *vcs01_srm_soap_user
        protected_srm_soap_password: *vcs01_srm_soap_pwd
    recovery_srm:
        recovery_srm_soap_host_fqdn: *vcs03_srm_fqdn
        recovery_srm_soap_username: *vcs03_srm_soap_user
        recovery_srm_soap_password: *vcs03_srm_soap_pwd

onboard_dr_cluster:
    select_a_hwi_for_the_protected_cluster:
    select_unprepared_protected_cluster: *cluster_name_protected
    select_a_hwi_for_the_recovery_cluster:
    select_unprepared_recovery_cluster: *cluster_name_recovery

edit_cluster_site:
    - cluster: *cluster_name_protected
      site: *site_name_protected
      hwi: *hwi_name_protected

edit_cluster_hwi:
    - cluster: *cluster_name_protected
      hwi_1: *hwi_name_protected
      hwi_2:

add_avamar_grid:
    - description: *avamar_name_protected
      select_operation_type: Add Avamar Grid
      avamar_grid_name: *avamar_name_protected
      avamar_grid_fqdn_name: *avamar_grid_fqdn_protected
      admin_user_name: *admin_user_name
      admin_password: *admin_password
      soap_user_name: *soap_user_name
      soap_password: *soap_password
      request: unknown
      site_name: *site_name_protected

    - description: *avamar_name_recovery
      select_operation_type: Add Avamar Grid
      avamar_grid_name: *avamar_name_recovery
      avamar_grid_fqdn_name: *avamar_grid_fqdn_recovery
      admin_user_name: *admin_user_name
      admin_password: *admin_password
      soap_user_name: *soap_user_name
      soap_password: *soap_password
      request: unknown
      site_name: *site_name_recovery

add_avamar_proxy:
    - dns_updated: *protected_dns_updated
      tenant_cluster: *cluster_name_protected
      datastore: *protected_avamar_proxy_datastore
      proxy_network: *protected_proxy_network
      proxy_vm_name: *protected_proxy_vm_name
      avamar_path: *protected_avamar_path
      proxy_ip: *protected_proxy_ip
      proxy_netmask: *protected_proxy_netmask
      proxy_gateway: *protected_proxy_gateway
      dns_server_ip: *protected_dns_server_ip
      proxy_username: *protected_proxy_username
      proxy_password: *protected_proxy_password
      avamar_grid: *avamar_name_protected
      avamar_domain: *protected_avamar_domain
      ova: *protected_avamar_proxy_ova
      deployment_server: *protected_deployment_server
      deployment_server_username: *protected_deployment_server_username
      deployment_server_password: *protected_deployment_server_password
      disable_verification: *protected_disable_verification

    - dns_updated: *recovery_dns_updated
      tenant_cluster: *cluster_name_recovery
      datastore: *recovery_avamar_proxy_datastore
      proxy_network: *recovery_proxy_network
      proxy_vm_name: *recovery_proxy_vm_name
      avamar_path: *recovery_avamar_path
      proxy_ip: *recovery_proxy_ip
      proxy_netmask: *recovery_proxy_netmask
      proxy_gateway: *recovery_proxy_gateway
      dns_server_ip: *recovery_dns_server_ip
      proxy_username: *recovery_proxy_username
      proxy_password: *recovery_proxy_password
      avamar_grid: *avamar_name_recovery
      avamar_domain: *recovery_avamar_domain
      ova: *recovery_avamar_proxy_ova
      deployment_server: *recovery_deployment_server
      deployment_server_username: *recovery_deployment_server_username
      deployment_server_password: *recovery_deployment_server_password
      disable_verification: *recovery_disable_verification

add_avamar_site_relationship:
  backup_env_type: 2C2VC
  site_first: *site_name_protected
  site_second: *site_name_recovery
  site_third:


edit_avamar_site_relationship:
  site_first: *site_name_protected
  site_second: *site_name_recovery
  site_third: ''

add_an_avamar_replication_relationship:
  -
    allow_duplicated_arr: False
    description: 'add arr'
    operation_type: 'Add Avamar Replication Relationship'
    avamar_site_relationship_name:
    site1_avamar_grid:
    site2_avamar_grid:
    site3_avamar_grid:

edit_avamar_replication_relationship:
    'arr':
    'admin_full': True

cluster_asr_to_associate:
    description: associate cluster to ASR
    reasons: testing
    cluster_action: Associate Cluster to ASR

associated_cluster_asr:
    {}

avamar_proxies_cluster_to_associate:
  - avamar_proxies: []
  - avamar_proxies: []

add_backup_service_level:
    - 'description': 'add backup service level'
      'reasons': 'reasons'
      'please_select_action_for_backup_service_level': 'Add Backup Service Level'
      'specify_the_service_level_name': *backup_name_prefix
      'select_backup_schedule': 'Monthly'
      'schedule_start_time': '18:00'
      'schedule_week_number': 'First'
      'schedule_weekday': 'Sunday'
      'regular_retention_policy': 'Until'
      'retention_for_number': '3'
      'retention_unit': 'Weeks'
      'retention_date': '7/22/17'
      'retention_time': '10:03 PM'
      'long_term_retention_policy': '2'
      'replication_schedule_type': 'Daily'
      'replication_weekday': 'Monday'
      'replication_week_number': 'First'
      'replication_start_time': '20:00'

provision_multiple_cloud_storage:
    -
      'cluster': *cluster_name_protected
      'hwi_name': *hwi_name_protected
      'virtual_pools': *vipr_storage_tier
      'storage_type': *storage_type
      'vPool_DS_Small': *vPool_DS_Small
      'vPool_DS_Large': *vPool_DS_Large

create_reservation_policy:
    names:
        - *reservation_policy_name

assign_reservation_policy_to_blueprint:
    blueprint_names: []
    reservation_policy_name:

deploy_vm:
    with_dp: True
    description: deploy vm
    number_of_vm: 1
    backup_service_level:
    SRM_power_on_priority:
    reason_for_request: test dp

operate_vm:
    basic_action_list:
      - Power On
      - Power Off
      - Reboot
    user_action_list:
      - Power Off

set_backup_service_level:
    backup_service_level_name:

display_backup_service_level:
    please_select_action_for_backup_service_level: Display Backup Service Levels
    additional_email: *additional_email
    email: Confirm

run_admin_report:
    description: run admin report
    reasons: run reason
    select_a_backup_service_level_name:
    select_pdf_page_orientation: Portrait
    select_one_or_more_reports_to_run:
    select_a_time_frame: Last Day
    email_results: 'Yes'
    email_address: *additional_email

delete_backup_service_level:
  - description: delete backup service level
    reasons: reasons
    please_select_action_for_backup_service_level: Delete Backup Service Level
    select_backup_service_level_to_delete:
    confirm_deletion_of_backup_service_level: Yes

delete_datastore:
    - description: Delete Logic
      reasons: del logic

delete_avamar_replication_relationship:
    'description': 'delete arr'
    'operation_type': 'Delete Avamar Replication Relationship'
    'delete_arr':

delete_avamar_site_relationship:
  description: delete avamar site relationship demo
  action: Delete an ASR
  avamar_site_relationship_name:

delete_avamar_grid:
    description: delete_avamar_grid
    select_operation_type: Delete Avamar Grid
    confirmation: Confirm

delete_cluster:
    []

delete_vcenter_relatinship:
    description: del_vcenter_relationship
    reasons: del relationship
    please_select_the_operation: Delete vCenter Relationship
    protected_vcenter: *vcenter_name_protected
    recovery_vcenter: *vcenter_name_recovery

delete_hwi:
    del_reasons: del
    del_description: del hwi
    del_performed_active: Delete Hardware Island
    isdel_obj: Confirm

delete_vcenter:
    description: delete vcenter
    reasons: test
    select_operation: Delete vCenter
    ensure_delete_info: Confirm

added_sites:
    *added_sites

added_vcenter:
    *added_vcenter

added_vcenter_relationship:
  -
    {
    'protected_vcenter': *protected_vcenter,
    'recovery_vcenter': *recovery_vcenter
    }

added_hwi:
    *added_hwi

existed_clusters:
    *existed_clusters

added_avamar_grid:
    *added_avamar_grid

added_avamar_site_relationship:
   - asr_name: *asr_name
     backup_env_type: *backup_environment_type
     sites: *sites

added_avamar_replication_relationship:
    *added_avamar_replication_relationship

added_backup_service_level:
    {
       'backup_to_operate_vm': *backup_to_operate_vm,
       'backup_to_set_backup_service': *backup_to_set_backup_service
    }

added_cloud_storage:
   - hwi_name: *storage_hwi
     cluster_name: *storage_cluster
     name: *datastorage_name
     srp: *srp

deployed_vms: *deployed_vms

added_reservation_policy:
    *added_reservation_policy

added_reservation:
 - *reservation_names

assigned_reservation_policy_reservations: *assigned_reservation

assigned_reservation_policy_blueprints: [*blueprint_name]

assign_datastores_and_reservation_policy_to_reservation:
    reservation_names: []
    reservation_policy_names: []