# ################################ Configuration section #############################################################
# Automation user only needs to update the parameters in this section
# [Mandatory] parameters : you must update with the right ones in your environment.
# [Optional] parameters : you can suggested to update with your own, but not mandatory.

mandatory:
    Clusters:
        1-protected_cluster_name:                                &protected_cluster  LON-WSW-RP-C1
        2-recovery_cluster_name:                                 &recovery_cluster   WSW-LON-RP-C1
    vCenters:
        1-Protected_vCenter_fqdn:                   &vcs01_fqdn         vcs02.vlab.local
        2-Protected_vCenter_datacenter:             &vcs01_dc           London
        3-Recovery_vCenter_fqdn:                    &vcs02_fqdn         vcs04.vlab.local
        4-Recovery_vCenter_datacenter:              &vcs02_dc           Warsaw
    vCenter Relationship:
        1-Protected_nsx_url:            &protected_nsx_url        nsx-mgr02.vlab.local
        2-Recovery_nsx_url:             &recovery_nsx_url         nsx-mgr04.vlab.local
        3-Vcs_user:                     &vcs_user                 administrator@vsphere.local
        4-Vcs_password:                 &vcs_pwd                  Password123!
        5-protected_nsx_username:             &nsx_active_user            'admin'
        6-protected_nsx_password:             &nsx_active_password        'Password123!'
        7-recovery_nsx_username:             &nsx_passive_user           'admin'
        8-recovery_nsx_password:             &nsx_passive_password       'Password123!'
    HWI:
        1-protected_vipr_varray:         &vArray_a           LON-HWI-2-vArray2
        2-recovery_vipr_varray:          &vArray_b           WSW-HWI-1-vArray1
    Avamar Grid:
        1-protected_avamar_grid_fqdn:             &grid_a_fqdn        london-ave01.vlab.local
        2-recovery_avamar_grid_fqdn:              &grid_b_fqdn        warsaw-ave01.vlab.local
        3-admin_user_name:    &ag_admin_user      root
        4-admin_password:    &ag_admin_pwd       Password123!
        5-soap_user_name:         &ag_soap_user       root
        6-soap_password:     &ag_soap_pwd        Emsee123_
    Protected Avamar Proxy:
        1-protected_dns_updated:              &protected_dns_updated                'Yes'
        2-protected_datastore:                  &protected_avamar_proxy_datastore     'LON-AVP-Templates01'
        3-protected_proxy_network:              &protected_proxy_network              'DPG_HPOD_L2X_1950 (DVS_Cloud_VCS02_London)'
        4-protected_proxy_vm_name:              &protected_proxy_vm_name              'london-ave02.vlab.local'
        5-protected_avamar_path:                &protected_avamar_path                '/clients/london-ave02.vlab.local'
        6-protected_proxy_ip:                   &protected_proxy_ip                   '192.168.0.22'
        7-protected_proxy_netmask:              &protected_proxy_netmask              '255.255.248.0'
        8-protected_proxy_gateway:              &protected_proxy_gateway              '192.168.1.250'
        9-protected_dns_server_ip:              &protected_dns_server_ip              '192.168.1.10'
        11-protected_proxy_username:             &protected_proxy_username             'root'
        12-protected_proxy_password:             &protected_proxy_password             'avam@r'
        13-protected_avamar_domain:              &protected_avamar_domain              '/clients'
        14-protected_ova:                        &protected_avamar_proxy_ova           '/DPNInstalls/downloads/VMWARE_PROXY_SP3/AvamarCombinedProxy-linux-sles11_64-7.4.101-58.ova'
        15-protected_deployment_server:          &protected_deployment_server          'london-ave02.vlab.local'
        16-protected_deployment_server_username: &protected_deployment_server_username 'root'
        17-protected_deployment_server_password: &protected_deployment_server_password 'avam@r'
        18-protected_disable_verification:       &protected_disable_verification       'No'
    Recovery Avamar Proxy:
        1-recovery_dns_updated:              &recovery_dns_updated                'Yes'
        2-recovery_datastore:                  &recovery_avamar_proxy_datastore     'DK_AVP-Templates'
        3-recovery_proxy_network:              &recovery_proxy_network              'DPG_HPOD_L2X_1960 (DVS_Cloud_VCS01_Dakar)'
        4-recovery_proxy_vm_name:              &recovery_proxy_vm_name              'Giza-ave01-p2.vlab.local'
        5-recovery_avamar_path:                &recovery_avamar_path                '/clients/Giza-ave01.vlab.local'
        6-recovery_proxy_ip:                   &recovery_proxy_ip                   '192.168.0.92'
        7-recovery_proxy_netmask:              &recovery_proxy_netmask              '255.255.248.0'
        8-recovery_proxy_gateway:              &recovery_proxy_gateway              '192.168.1.250'
        9-recovery_dns_server_ip:              &recovery_dns_server_ip              '192.168.1.10'
        11-recovery_proxy_username:             &recovery_proxy_username             'root'
        12-recovery_proxy_password:             &recovery_proxy_password             'avam@r'
        13-recovery_avamar_domain:              &recovery_avamar_domain              '/clients'
        14-recovery_ova:                        &recovery_avamar_proxy_ova           '/DPNInstalls/downloads/VMWARE_PROXY_SP3/AvamarCombinedProxy-linux-sles11_64-7.4.101-58.ova'
        15-recovery_deployment_server:          &recovery_deployment_server          'Dakar-ave01-p0.vlab.local'
        16-recovery_deployment_server_username: &recovery_deployment_server_username 'root'
        17-recovery_deployment_server_password: &recovery_deployment_server_password 'avam@r'
        18-recovery_disable_verification:       &recovery_disable_verification       'No'
    provision_multiple_cloud_storage:
        1-storage_tier_a(Use_comma_to_split_the_storage_tiers):          &vipr_storage_tier_a        'LON-VNX-VP; available'
        2-storage_tier_b(Use_comma_to_split_the_storage_tiers):          &vipr_storage_tier_b        'WSW-Local; available'
        3-storage_type:                         &storage_type               'VMFS'
        4-number_of_smaller_size_storages(Non-negative_interger): &vPool_DS_Small  1
        5-number_of_larger_size_storages(Non-negative_interger):  &vPool_DS_Large  0
    Pre-Reservation:
        protected_reservation_names:      &resvation_name_a   'rp_dev155_res_1'
        recovery_reservation_names:       &resvation_name_b   'rp_dev155_res_2'
    Pre-Reservation Policy:
        1-rp_name_01:            &res_policy_name_01    dev063-LON-WSW-RP-C1
        2-rp_name_02:            &res_policy_name_02    dev063-WSW-LON-RP-C1
    Backup Service Level:
        additional_email:                           &additional_email   'ehc_sysadmin@vlab.local'
    Virtual machine blueprint:
        1-blueprint_name_A:                         &bp_a_name          'rp_bp_1_dev167'
        2-vSphere_Machine_ID_A:                     &bp_a_id            'vSphere_Machine_1'
        3-blueprint_name_rp:                        &bp_b_name          'rp_bp_2_dev167'
        4-vSphere_Machine_ID_rp:                    &bp_b_id            'vSphere_Machine_1'
    Deploy VM Parallel:
        cpu_max:                                    &cpu_max              1
        ram_max:                                    &ram_max                    4000
    RP4VM VRPA:
        1-vrpa_primary_ip:                          &vrpa_a_ip          '192.168.1.57'
        2-vrpa_secondary_ip:                        &vrpa_b_ip          '192.168.1.58'
        3-vrpa_admin_user:                          &vrpa_admin         'admin'
        4-vrpa_admin_password:                      &vrpa_pwd           'admin'
    RP4VM Policy:
        1-replication_type:                         &rp_policy_type         'Asynchronous'
        2-journal_size:                             &journal_size           10
        3-rpo_number:                               &rpo_number             2
        4-rpo_units:                                &rpo_units             'GB'
#################################################################################################################
optional:
    Sites:
        protected_site:       &site_a             London-site02
        recovery_site:        &site_b             WswSite
    vCenters:
        protected_vCenter_name:   &vcs01_name         LonCenter
        recovery_vCenter_name:    &vcs02_name         WswCenter
    Hardware Islands:
        local_HWI:            &hwi_a              LON-HWI-1
        remote_HWI:           &hwi_b              WSW-HWI-1
    Avamar Grids:
        Grid_name_for_protected_site:         &grid_a             CA2S-DP-ave02
        Grid_name_for_recovery_site:          &grid_b             Warsaw-ave02
    RP4VM_policy_name:      &rp_policy_name     AutoPolicy-RP4vm-DP
    Backup_Service_Level_Name_Prefix:                  &backup_name_prefix   'backup-svc-CA2S-DP'
keys_to_constants:
    Hardware Islands:
        storage_typea:        &storage_type_a     BLOCK
        storage_typeb:        &storage_type_b     BLOCK

# variables set to make debug easier:
Intermediate_keys:
    datastorage_name: &datastorage_name []
    storage_hwi: &storage_hwi
    storage_cluster: &storage_cluster
    srp: &srp
shared:
    current_browser:
        type:
        instance:
        launched: False
        current_user:
        is_login: False
    backup_service_levels:
        for_deletion: []
        for_deploy_vm:
        for_set_backup_service_level:
    RP4VM_related_vCenters:
        protected_vCenter:
        recovery_vCenter:
    RP4VM_vRPA_clusters:
        primary:
            ip:
            user: *vrpa_admin
            password: *vrpa_pwd
            port: 443
        secondary:
            ip:
            user: *vrpa_admin
            password: *vrpa_pwd
            port: 443
    RP4VM_Failover:
        consistency_group_name:

add_sites:
  - *site_a
  - *site_b

added_sites: []

delete_sites:
    description: deletesite
    action_to_be_performed: Delete Site
    please_pick_a_site_to_delete:
    please_confirm_that_you_wish_to_delete_this_site: Confirm

add_vcenter:
  -
    description: vCenter_1
    reasons: Add_vCenter_1
    select_operation: Add vCenter
    name_for_vcenter_endpoint: *vcs01_name
    select_vc_fqdn_to_add: *vcs01_fqdn
    new_vcenter_associated_sites:
      -  *site_a
    select_datacenter_to_add:  *vcs01_dc
    request: unknown
  -
    description: vCenter_2
    reasons: Add_vCenter_2
    select_operation: Add vCenter
    name_for_vcenter_endpoint: *vcs02_name
    select_vc_fqdn_to_add: *vcs02_fqdn
    new_vcenter_associated_sites:
      -  *site_b
    select_datacenter_to_add:  *vcs02_dc
    request: unknown

added_vcenter: []

delete_vcenter:
    description: delete vcenter
    reasons: test
    select_operation: Delete vCenter
    ensure_delete_info: Confirm

delete_datastore:
    - description: Delete Logic
      reasons: del logic
      request: unknow

add_hwi:
  -
    hwi_name: *hwi_a
    performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
    vcenter_name_active:  *vcs01_name
    site_name_active: *site_a
    storage_type: BLOCK
    vipr_active: ViPR
    vipr_active_check:
      - *vArray_a
    request: unknown
  -
    hwi_name: *hwi_b
    performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
    vcenter_name_active:  *vcs02_name
    site_name_active: *site_b
    storage_type: BLOCK
    vipr_active: ViPR
    vipr_active_check:
      - *vArray_b
    request: unknown

added_hwi: []

delete_hwi:
    del_reasons: delete_hwi
    del_description: delete_hwi
    del_performed_active: Delete Hardware Island
    isdel_obj: Confirm

deploy_vm_parallel:
    rp4vm_cg: 'Auto_cg'
    rp4vm_boot_priority: 1
    rp4vm_policy: *rp_policy_name
    with_dp: True
    description: ''
    number_of_vm: 1
    cpu_max: *cpu_max
    ram_max: *ram_max
    reason_for_request: test RP4VM scenario WF

onboard_cluster_type: LC2S

cluster_maintenance:
  onboard_local_cluster_for_rp4vm:
    local_cluster_hardware_island: *hwi_a
    local_cluster_name: *protected_cluster
    partner_cluster_hardware_island: *hwi_b
    partner_cluster_name: *recovery_cluster

existed_clusters: []

provision_multiple_cloud_storage:
    -
      'cluster': *protected_cluster
      'hwi_name': *hwi_a
      'virtual_pools': *vipr_storage_tier_a
      'storage_type': *storage_type
      'vPool_DS_Small': *vPool_DS_Small
      'vPool_DS_Large': *vPool_DS_Large
    -
      'cluster': *recovery_cluster
      'hwi_name': *hwi_b
      'virtual_pools': *vipr_storage_tier_b
      'storage_type': *storage_type
      'vPool_DS_Small': *vPool_DS_Small
      'vPool_DS_Large': *vPool_DS_Large

added_avamar_proxies: []

add_avamar_proxy:
    - dns_updated: *protected_dns_updated
      tenant_cluster: *protected_cluster
      datastore: *protected_avamar_proxy_datastore
      proxy_network: *protected_avamar_proxy_datastore
      proxy_vm_name: *protected_proxy_vm_name
      avamar_path: *protected_avamar_path
      proxy_ip: *protected_proxy_ip
      proxy_netmask: *protected_proxy_netmask
      proxy_gateway: *protected_proxy_gateway
      dns_server_ip: *protected_dns_server_ip
      proxy_username: *protected_proxy_username
      proxy_password: *protected_proxy_password
      avamar_grid: *grid_a
      avamar_domain: *protected_avamar_domain
      ova: *protected_avamar_proxy_ova
      deployment_server: *protected_deployment_server
      deployment_server_username: *protected_deployment_server_username
      deployment_server_password: *protected_deployment_server_password
      disable_verification: *protected_disable_verification

    - dns_updated: *recovery_dns_updated
      tenant_cluster: *recovery_cluster
      datastore: *recovery_avamar_proxy_datastore
      proxy_network: *recovery_avamar_proxy_datastore
      proxy_vm_name: *recovery_proxy_vm_name
      avamar_path: *recovery_avamar_path
      proxy_ip: *recovery_proxy_ip
      proxy_netmask: *recovery_proxy_netmask
      proxy_gateway: *recovery_proxy_gateway
      dns_server_ip: *recovery_dns_server_ip
      proxy_username: *recovery_proxy_username
      proxy_password: *recovery_proxy_password
      avamar_grid: *grid_b
      avamar_domain: *recovery_avamar_domain
      ova: *recovery_avamar_proxy_ova
      deployment_server: *recovery_deployment_server
      deployment_server_username: *recovery_deployment_server_username
      deployment_server_password: *recovery_deployment_server_password
      disable_verification: *recovery_disable_verification

added_cloud_storage:
    - hwi_name: *storage_hwi
      cluster_name: *storage_cluster
      name: *datastorage_name
      srp: *srp

add_avamar_grid:
    - description: add avamar grid01
      select_operation_type: Add Avamar Grid
      avamar_grid_name: *grid_a
      avamar_grid_fqdn_name: *grid_a_fqdn
      admin_user_name: *ag_admin_user
      admin_password: *ag_admin_pwd
      soap_user_name: *ag_soap_user
      soap_password: *ag_soap_pwd
      request: unknown
      site_name: *site_a

    - description: add avamar grid02
      select_operation_type: Add Avamar Grid
      avamar_grid_name: *grid_b
      avamar_grid_fqdn_name: *grid_b_fqdn
      admin_user_name: *ag_admin_user
      admin_password: *ag_admin_pwd
      soap_user_name: *ag_soap_user
      soap_password: *ag_soap_pwd
      request: unknown
      site_name: *site_b

added_avamar_grid: []

get_asr_from_vro:
    available_asr: []

add_avamar_site_relationship:
  description: add avamar site relationship demo
  action: Add an ASR
  backup_env_type: MC2VC
  site_first: *site_a
  site_second: *site_b

add_an_avamar_replication_relationship:
  -
    allow_duplicated_arr: False
    description: add arr
    operation_type: Add Avamar Replication Relationship
    avamar_site_relationship_name:
    site1_avamar_grid: *grid_a
    site2_avamar_grid: *grid_b
    site3_avamar_grid:

get_arr_from_vro:
    available_arr: []

cluster_asr_to_associate:
    description: associate cluster to ASR
    reasons: testing
    cluster_action: Associate Cluster to ASR

added_avamar_site_relationship:
 - asr_name: None
   backup_env_type: None
   sites: []

added_avamar_replication_relationship: []

added_backup_service_level:
  backup_to_operate_vm:
  backup_to_set_backup_service:

associated_avamar_proxy_cluster: []

avamar_proxies_cluster_to_associate:
  - avamar_proxies: []
  - avamar_proxies: []

associated_cluster_asr: []

add_backup_service_level:
    - 'description': 'add backup service level'
      'reasons': 'reasons'
      'please_select_action_for_backup_service_level': 'Add Backup Service Level'
      'specify_the_service_level_name': *backup_name_prefix
      'select_backup_schedule': 'Monthly'
      'schedule_start_time': '18:00'
      'schedule_week_number': 'First'
      'schedule_weekday': 'Sunday'
      'regular_retention_policy': 'Until'
      'retention_for_number': '3'
      'retention_unit': 'Weeks'
      'retention_date': '7/22/17'
      'retention_time': '10:03 PM'
      'long_term_retention_policy': '2'
      'replication_schedule_type': 'Daily'
      'replication_weekday': 'Monday'
      'replication_week_number': 'First'
      'replication_start_time': '20:00'

set_backup_service_level:
    backup_service_level_name:

display_backup_service_level:
    please_select_action_for_backup_service_level: Display Backup Service Levels
    email: Confirm

delete_backupdelete_backup_service_level:
  - description: delete_backup_service_level_operate_vm
    reasons: reasons
    please_select_action_for_backup_service_level: Delete Backup Service Level
    select_backup_service_level_to_delete:
    confirm_deletion_of_backup_service_level: Yes
  - description: delete_backup_service_level_operate_vm
    reasons: reasons
    please_select_action_for_backup_service_level: Delete Backup Service Level
    select_backup_service_level_to_delete:
    confirm_deletion_of_backup_service_level: Yes

delete_avamar_replication_relationship:
    description: delete arr
    operation_type: Delete Avamar Replication Relationship
    delete_arr: None

delete_avamar_site_relationship:
  description: delete avamar site relationship demo
  action: Delete an ASR

delete_avamar_grid:
    description: delete_avamar_grid
    select_operation_type: Delete Avamar Grid
    confirmation: Confirm

operate_vm:
    basic_action_list:
        - Power On
        - Power Off
        - Reboot
    user_action_list:
        - Power Off

create_reservation_policy:
  names:
    - *res_policy_name_01
    - *res_policy_name_02


added_reservation_policy: []

added_reservation: [ *resvation_name_a, *resvation_name_a]

assigned_reservation_policy_reservations: []

assign_datastores_and_reservation_policy_to_reservation:
    reservation_names: []
    reservation_policy_names: []

assign_reservation_policy_to_blueprint:
    blueprint_names:
    -
    reservation_policy_name:

blueprints:
    - *bp_a_name
    - *bp_b_name

assigned_reservation_policy_blueprints:
    - *bp_a_name
    - *bp_b_name

blueprint_machine_pairs:
    {*bp_a_name: *bp_a_id,
    *bp_b_name: *bp_b_id}

deploy_vm:
    with_dp: True
    description: RP4VM_DP
    number_of_vm: 1
    backup_service_level:
    reason_for_request: RP4VM_DP

deployed_vms: []

rp4vm_info:
    blueprint: *bp_b_name
    vsphere_blueprint_id: *bp_b_id
    sequence: 2
    cg_list: []
    protected_vms: []

policy_info:
  policy_name: *rp_policy_name
  policy_type: *rp_policy_type
  journal_size: *journal_size
  rp_number: *rpo_number
  rp_units: *rpo_units

vRPA_cluster_to_add:
    primary_clusetr:
        ip: *vrpa_a_ip
        admin: *vrpa_admin
        password: *vrpa_pwd
    secondary_cluster:
        ip: *vrpa_b_ip
        admin: *vrpa_admin
        password: *vrpa_pwd

vCenter_relationship_to_add:
    protected_vCenter_credential:
        username: *vcs_user
        password: *vcs_pwd
    recovery_vCenter_credential:
        username: *vcs_user
        password: *vcs_pwd
    NSX_is_available: True
    protected_NSX_manager:
        url: *protected_nsx_url
        username: *nsx_active_user
        password: *nsx_active_password
    recovery_NSX_manager:
        url: *recovery_nsx_url
        username: *nsx_passive_user
        password: *nsx_passive_password

get_vrpa_clusters_from_vro:
    available_vrpa_clusters: []