# ################################ Configuration section #############################################################
# Automation user only needs to update the parameters in this section
# mandatory parameters : you must update with the right ones in your environment.
# optional parameters : you can suggested to update with your own, but not mandatory.
mandatory:
  Pre-Reservation:
    reservation_names:              &reservation_names          'ca1s_dev155_res'
  Pre-Reservation Policy:
    reservation_policy_name:   &reservation_policy_name  'E2E_Res_Policy_CA1S-DP'
  Vcenter:
    1-vCenter_fqdn:              &vcenter_fqdn             'vcs01.vlab.local'
    # Datacenter name in vCenter you configure
    2-vCenter_datacenter:                &datacenter               'Cork'
  HWI:
    # vArray in ViPR, the vArray must has physical connection to the vCenter you configure above
    1-vipr_varray_A:             &vipr_varray01            'CRK-HWI-1-vArray1'
    2-vipr_varray_B:             &vipr_varray02            'CRK-HWI-2-vArray1'
  Cluster:
    # CA1S Cluster name
    cluster_name:              &cluster_name             'CRK-CRK-CA-C1'
  Provision Multiple Cloud Storage:
    provision_in_hwi_1:
       1-storage_tier_a(Use comma to split the storage tiers):     &vipr_storage_tier_a        'CRK-XIO-Local; available'
       2-number_of_smaller_size_storages_a(Non-negative interger): &vPool_DS_Small_a  1
       3-number_of_larger_size_storages_a(Non-negative interger):  &vPool_DS_Large_a  0
       4-storage_type_a:                         &storage_type_a               'VMFS CA-Enabled'
    provision_in_hwi_2:
       1-storage_tier_b(Use comma to split the storage tiers):     &vipr_storage_tier_b        'CRK-XIO-Local; available'
       2-number_of_smaller_size_storages_b(Non-negative interger): &vPool_DS_Small_b  0
       3-number_of_larger_size_storages_b(Non-negative interger):  &vPool_DS_Large_b  0
       4-storage_type_b:                         &storage_type_b               'VMFS CA-Enabled'
  Backup Service Level:
      additional_email:        &additional_email          'ehc_sysadmin@vlab.local'
  Virtual machine blueprint:
    # Blueprint name you configure in the automation environment
    blueprint_name:            &blueprint_name            'ca1s-DP'
    # virtual machine name you configure in the automation environment
    vSphere_Machine_ID:      &vSphere_Machine_ID        'vSphere_Machine_1'
  #DP
  Avamar Grid:
    1-avamar_grid_fqdn:          &site_avamar_grid_fqdn    'cork-ave01.vlab.local'
    2-admin_username:            &ag_admin_user            'root'
    3-admin_password:            &ag_admin_pwd             'Password123!'
    4-soap_user_name:                 &ag_soap_user             'root'
    5-soap_password:             &ag_soap_pwd              'Emsee123_'
  Avamar Proxy:
    1-dns_updated:                  &dns_updated                'Yes'
    2-datastore:                    &avamar_proxy_datastore     'CRK-AVP-Templates01'
    3-network:                      &proxy_network              'DVS_Cloud_VCS01_-DVUplinks-101 (DVS_Cloud_VCS01_Cork)'
    4-proxy_vm_name:                &proxy_vm_name              'cork-ave01-p0.vlab.local'
    5-avamar_path:                  &avamar_path                '/clients/cork-ave01.vlab.local'
    6-proxy_ip:                     &proxy_ip                   '192.168.0.92'
    7-proxy_netmask:                &proxy_netmask              '255.255.248.0'
    8-proxy_gateway:                &proxy_gateway              '192.168.1.250'
    9-dns_server_ip:                &dns_server_ip              '192.168.1.10'
    11-proxy_username:              &proxy_username             'root'
    12-proxy_password:              &proxy_password             'avam@r'
    13-avamar_domain:               &avamar_domain              '/clients'
    14-ova:                         &avamar_proxy_ova           '/DPNInstalls/downloads/VMWARE_PROXY_SP3/AvamarCombinedProxy-linux-sles11_64-7.4.101-58.ova'
    15-deployment_server:           &deployment_server          'Dakar-ave01-p0.vlab.local'
    16-deployment_server_username:  &deployment_server_username 'root'
    17-deployment_server_password:  &deployment_server_password 'avam@r'
    18-disable_verification:        &disable_verification       'No'
  Deploy VM Parallel:
    cpu_max:                  &cpu_max              1
    ram_max:                        &ram_max                    4096
################################# Configuration section #############################################################
optional:
    site_name:                 &site_name                'CA1S-DP-site'
    vcenter_name:              &vcenter_name             'CA1S-DP-vcenter01'
    hardware_islands:
      hwi_name01:           &hwi_name01         'CA1S-DP-HWI-1'
      hwi_name02:           &hwi_name02         'CA1S-DP-HWI-2'
    avamar_grid_name:          &site_avamar_grid         CA1S-DP-ave01
    backup_service_level_name_prefix:  &backup_name_prefix       'backup-svc-CA1S-DP'

keys_to_constants:
    hardware_islands:
      storage_typea:        &storage_type     BLOCK
    inter_site_vs_intra_site:  &inter_vs_intra  'Intra-site'
    ASR:
       backup_environment_type:   &backup_environment_type  '1C1VC'
# variables set to make debug easier:
Intermediate_keys:
      added_site: &added_site    [] #['CA1S-DP-site']
      added_vcenter: &added_vcenter  []#['CA1S-DP-vcenter01']
      added_hwi: &added_hwi []#['CA1S-DP-HWI-1','CA1S-DP-HWI-2']
      existed_clusters: &existed_clusters []#['CRK-CRK-CA-C1']
      added_reservation_policy_name: &added_reservation_policy_name [] #['E2E_Res_Policy_CA1S-DP']
      assigned_blueprint: &assigned_buleprint []
      assigned_reservation: &assigned_reservation []
      datastorage_name: &datastorage_name  []
      backup_service_to_operate_vm:           &backup_service_to_operate_vm
      backup_service_to_set_backup_service:   &backup_service_to_set_backup_service

onboard_cluster_type: CA1S

blueprints:
    - *blueprint_name
blueprint_machine_pairs:
   {*blueprint_name: *vSphere_Machine_ID}

deploy_vm_parallel:
    with_dp: True
    assign_storage_reservation_policy: True
    description: 'deployvm'
    number_of_vm: 1
    cpu_max: *cpu_max
    ram_max: *ram_max
    srm_power_on_priority:
    reason_for_request: test ca1s scenario WF

deployed_vms:
 []

existed_clusters:
  *existed_clusters

add_sites:
    - *site_name

added_sites:
   *added_site

add_vcenter:
    -
      select_operation: Add vCenter
      name_for_vcenter_endpoint: *vcenter_name
      select_vc_fqdn_to_add: *vcenter_fqdn
      new_vcenter_associated_sites:
                                  - *site_name
      select_datacenter_to_add: *datacenter

added_vcenter:
  *added_vcenter

delete_vcenter:
    select_operation: Delete vCenter
    select_vcenter:
    ensure_delete_info: Confirm

add_hwi:
   -
      hwi_name: *hwi_name01
      performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
      vcenter_name_active: *vcenter_name
      site_name_active: *site_name
      storage_type: *storage_type
      vipr_active: ViPR
      vipr_active_check: [*vipr_varray01]
   -
      hwi_name: *hwi_name02
      performed_active: Add VxRack(Flex)/VxBlock based Hardware Island
      vcenter_name_active: *vcenter_name
      site_name_active: *site_name
      storage_type: *storage_type
      vipr_active: ViPR
      vipr_active_check: [*vipr_varray02]

added_hwi:
    *added_hwi

onboard_ca_cluster:
   select_hardward_island_1: *hwi_name01
   select_unprepared_cluster: *cluster_name
   choose_inter_site_vs_intra_site: 'Intra-site'
   select_hardward_island_2: *hwi_name02
   select_hosts_for_hardware_island_1:
   select_hosts_for_hardware_island_2:

operate_vm:
    basic_action_list:
      - Power On
      - Power Off
      - Reboot
    user_action_list:
      - Power Off

delete_cluster:
    []

provision_multiple_cloud_storage:
    -
      'cluster': *cluster_name
      'hwi_name': *hwi_name01
      'virtual_pools': *vipr_storage_tier_a
      'storage_type': *storage_type_a
      'vPool_DS_Small': *vPool_DS_Small_a
      'vPool_DS_Large': *vPool_DS_Large_a
    -
      'cluster': *cluster_name
      'hwi_name': *hwi_name02
      'virtual_pools': *vipr_storage_tier_b
      'storage_type': *storage_type_b
      'vPool_DS_Small': *vPool_DS_Small_b
      'vPool_DS_Large': *vPool_DS_Large_b

added_cloud_storage:
    -
      hwi_name: *hwi_name01
      cluster_name: *cluster_name
      name: *datastorage_name
      srp: []

create_reservation_policy:
    names:
       - *reservation_policy_name

added_reservation_policy:
  *added_reservation_policy_name

added_reservation:
  [*reservation_names]

assigned_reservation_policy_reservations:
  *assigned_reservation

assigned_reservation_policy_blueprints: [*blueprint_name]

assign_datastores_and_reservation_policy_to_reservation:
    reservation_names: []
    reservation_policy_names: []

assign_rervation_policy_to_blueprint:
    blueprint_names: []
    reservation_policy_name:

delete_datastore:
    - description: Delete Logic
      reasons: del logic
      request: unknown

delete_hwi:
    del_reasons: tear down
    del_description: delete hwi
    del_performed_active: Delete Hardware Island
    isdel_obj: Confirm

delete_sites:
    description: deletesite
    action_to_be_performed: Delete Site
    please_pick_a_site_to_delete:
    please_confirm_that_you_wish_to_delete_this_site: Confirm

#DP config
add_avamar_grid:
  - description: add avamargrid01
    select_operation_type: Add Avamar Grid
    avamar_grid_name: *site_avamar_grid
    avamar_grid_fqdn_name: *site_avamar_grid_fqdn
    admin_user_name: *ag_admin_user
    admin_password: *ag_admin_pwd
    soap_user_name: *ag_soap_user
    soap_password: *ag_soap_pwd
    request: unknown
    site_name: *site_name

add_avamar_proxy:
    - dns_updated: *dns_updated
      tenant_cluster: *cluster_name
      datastore: *avamar_proxy_datastore
      proxy_network: *proxy_network
      proxy_vm_name: *proxy_vm_name
      avamar_path: *avamar_path
      proxy_ip: *proxy_ip
      proxy_netmask: *proxy_netmask
      proxy_gateway: *proxy_gateway
      dns_server_ip: *dns_server_ip
      proxy_username: *proxy_username
      proxy_password: *proxy_password
      avamar_grid: *site_avamar_grid
      avamar_domain: *avamar_domain
      ova: *avamar_proxy_ova
      deployment_server: *deployment_server
      deployment_server_username: *deployment_server_username
      deployment_server_password: *deployment_server_password
      disable_verification: *disable_verification

added_avamar_grid:
    [*site_avamar_grid]

add_avamar_site_relationship:
  backup_env_type: '1C1VC'
  site_first: *site_name
  site_second:
  site_third:

added_avamar_site_relationship:
   - asr_name:
     backup_env_type: '1C1VC'
     sites:
        - *site_name

add_an_avamar_replication_relationship:
  -
    allow_duplicated_arr: False
    description: add arr
    operation_type: Add Avamar Replication Relationship
    avamar_site_relationship_name:
    site1_avamar_grid: *site_avamar_grid
    site2_avamar_grid:
    site3_avamar_grid:

added_avamar_replication_relationship: []

cluster_asr_to_associate:
    description: 'associate cluster to ASR'
    reasons: testing
    cluster_action: 'Associate Cluster to ASR'

associated_cluster_asr:

avamar_proxies_cluster_to_associate:
  - avamar_proxies: []

associated_avamar_proxy_cluster:
  []

add_backup_service_level:
    - 'description': 'add backup service level'
      'reasons': 'reasons'
      'please_select_action_for_backup_service_level': 'Add Backup Service Level'
      'specify_the_service_level_name': *backup_name_prefix
      'select_backup_schedule': 'Monthly'
      'schedule_start_time': '18:00'
      'schedule_week_number': 'First'
      'schedule_weekday': 'Sunday'
      'regular_retention_policy': 'Until'
      'retention_for_number': '3'
      'retention_unit': 'Weeks'
      'retention_date': '7/22/17'
      'retention_time': '10:03 PM'
      'long_term_retention_policy': '2'
      'replication_schedule_type': 'Daily'
      'replication_weekday': 'Monday'
      'replication_week_number': 'First'
      'replication_start_time': '20:00'

added_backup_service_level:
    backup_to_operate_vm: *backup_service_to_operate_vm
    backup_to_set_backup_service: *backup_service_to_set_backup_service

on_demand_backup_vm:
  vm_name:
  description: A description of on_demand_backup_vm
  reasons: A reason of on_demand_backup_vm

get_arr_from_vro:
    available_arr: []

get_asr_from_vro:
    available_asr: []

set_backup_service_level:
    backup_service_level_name:

get_vrpa_clusters_from_vro:
    available_vrpa_clusters: []

display_backup_service_level:
    please_select_action_for_backup_service_level: Display Backup Service Levels
    email: Confirm

run_admin_report:
  description: run admin report
  reasons: 'run admin report'
  select_a_backup_service_level_name:
  select_pdf_page_orientation: Portrait
  select_one_or_more_reports_to_run:
  select_a_time_frame: Last Day
  email_results: Yes
  email_address: 123@emc.com

delete_backup_service_level:
    -
      description: delete_backup_service_level_operate_vm
      reasons: 'delete_bsl_operate_vm'
      please_select_action_for_backup_service_level: Delete Backup Service Level
      select_backup_service_level_to_delete:
      confirm_deletion_of_backup_service_level: Yes

delete_avamar_replication_relationship:
    description: delete arr
    operation_type: Delete Avamar Replication Relationship
    delete_arr:

deleted_avamar_site_relationship:
    -
delete_avamar_grid:
    description: delete_avamar_grid
    select_operation_type: Delete Avamar Grid
    confirmation: Confirm